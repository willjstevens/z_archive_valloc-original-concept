
CREATE SCHEMA VALLOC AUTHORIZATION valloc;

SET SCHEMA VALLOC;

CREATE TABLE TARGET_ENVIRONMENT
(
	ID INT NOT NULL 
		GENERATED ALWAYS AS IDENTITY 
		CONSTRAINT TARGET_ENVIRONMENT_ID_PK PRIMARY KEY,
	NAME VARCHAR(100) NOT NULL,
	PATH VARCHAR(500) NOT NULL
);

CREATE TABLE HOST
(
	ID INT NOT NULL 
		GENERATED ALWAYS AS IDENTITY 
		CONSTRAINT HOST_ID_PK PRIMARY KEY,
	IP_ADDRESS VARCHAR(15) NOT NULL,
	DOMAIN_NAME VARCHAR(100)
);

CREATE TABLE TARGET_HOST
(
	TARGET_ENVIRONMENT_ID INT NOT NULL,
	CONSTRAINT TARGET_ENVIRONMENT_FK
		FOREIGN KEY (TARGET_ENVIRONMENT_ID)
		REFERENCES TARGET_ENVIRONMENT (ID),
	HOST_ID INT NOT NULL,
	CONSTRAINT HOST_FK
		FOREIGN KEY (HOST_ID)
		REFERENCES HOST (ID),		
	HOST_ORDER_NUMBER INT NOT NULL,
	ADMIN_PORT INT NOT NULL,
	WORKER_PORT INT NOT NULL
);

-- whether/not autocommit
COMMIT; 
